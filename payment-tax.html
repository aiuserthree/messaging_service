<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>세금계산서 발행 - 메시징 서비스</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/layout.css">
    <style>
        .status-badge {
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 500;
        }
        .status-pending { background: rgba(245, 158, 11, 0.1); color: var(--warning-color); }
        .status-completed { background: rgba(16, 185, 129, 0.1); color: var(--success-color); }
        .status-cancelled { background: rgba(100, 116, 139, 0.1); color: var(--secondary-color); }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- 헤더 -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html" style="text-decoration: none; color: inherit;">
                        <h1>iSend</h1>
                    </a>
                </div>
                <nav class="main-nav">
                    <a href="index.html" class="nav-item">대시보드</a>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">문자 발송</a>
                        <div class="nav-dropdown">
                            <a href="message-send-general.html" class="nav-dropdown-item">일반문자 발송</a>
                            <a href="message-send-ad.html" class="nav-dropdown-item">광고문자 발송</a>
                            <a href="message-send-election.html" class="nav-dropdown-item">공직선거문자 발송</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">카톡 발송</a>
                        <div class="nav-dropdown">
                            <a href="kakao-send-alimtalk.html" class="nav-dropdown-item">알림톡 발송</a>
                            <a href="kakao-send-brandtalk.html" class="nav-dropdown-item">브랜드톡 발송</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">템플릿</a>
                        <div class="nav-dropdown">
                            <a href="template-message.html" class="nav-dropdown-item">문자</a>
                            <a href="template-alimtalk.html" class="nav-dropdown-item">알림톡</a>
                            <a href="template-brandtalk.html" class="nav-dropdown-item">브랜드톡</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">주소록</a>
                        <div class="nav-dropdown">
                            <a href="addressbook.html" class="nav-dropdown-item">주소록 관리</a>
                            <a href="addressbook-reject.html" class="nav-dropdown-item">수신거부관리</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">발송 관리</a>
                        <div class="nav-dropdown">
                            <a href="send-result.html" class="nav-dropdown-item">발송결과</a>
                            <a href="send-reservation.html" class="nav-dropdown-item">예약내역</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown active">
                        <a href="#" class="nav-link">결제 관리</a>
                        <div class="nav-dropdown">
                            <a href="payment-charge.html" class="nav-dropdown-item">충전하기</a>
                            <a href="payment-history.html" class="nav-dropdown-item">충전/사용 내역</a>
                            <a href="payment-tax.html" class="nav-dropdown-item active">세금계산서 발행</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">마이페이지</a>
                        <div class="nav-dropdown">
                            <a href="mypage-profile.html" class="nav-dropdown-item">내 정보 수정</a>
                            <a href="mypage-caller-number.html" class="nav-dropdown-item">발신번호 관리</a>
                        </div>
                    </div>
                </nav>
                <div class="header-actions">
                    <div class="balance-info">
                        <span class="balance-label">잔액</span>
                        <span class="balance-amount">1,000,000원</span>
                    </div>
                    <button class="btn btn-sm btn-outline">로그아웃</button>
                </div>
            </div>
        </header>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <div class="page-header">
                <h2>세금계산서 발행</h2>
                <p class="page-description">충전/사용 내역에 대한 세금계산서를 신청하고 조회합니다</p>
            </div>

            <!-- 안내 메시지 -->
            <div class="alert alert-info">
                <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                    <li>세금계산서는 신청해주신 날짜 및 이메일로 1~2일 내 발행됩니다</li>
                    <li>카드결제는 세금계산서 발행불가 및 승인모드로 온라인 영수증 발급 받으시기 바랍니다</li>
                    <li>현금영수증을 신청하고자 하는 고객님들은 1:1 고객센터로 문의 바랍니다</li>
                </ul>
            </div>

            <!-- 기업 정보 -->
            <div class="card">
                <h3 class="card-title">기업 정보</h3>
                <div class="table-container">
                    <table class="table">
                        <tr>
                            <th style="width: 150px;">회사명(상호)</th>
                            <td>주식회사 예시</td>
                        </tr>
                        <tr>
                            <th>사업자등록번호</th>
                            <td>123-45-67890</td>
                        </tr>
                        <tr>
                            <th>대표자명</th>
                            <td>홍길동</td>
                        </tr>
                        <tr>
                            <th>사업장 주소</th>
                            <td>서울시 강남구 테헤란로 123</td>
                        </tr>
                    </table>
                </div>
                <div style="margin-top: 16px;">
                    <a href="mypage-profile.html" class="btn btn-outline">기업정보 수정</a>
                </div>
            </div>

            <!-- 계산서 수신 정보 -->
            <div class="card" style="margin-top: 24px;">
                <h3 class="card-title">계산서 수신 정보</h3>
                <div class="form-group">
                    <label class="form-label required">담당자 이름</label>
                    <input type="text" class="form-input" value="홍길동" required>
                </div>
                <div class="form-group">
                    <label class="form-label required">담당자 연락처</label>
                    <input type="text" class="form-input" value="010-1234-5678" required>
                </div>
                <div class="form-group">
                    <label class="form-label required">수신 이메일</label>
                    <input type="email" class="form-input" value="example@company.com" required>
                    <div class="form-help">세금계산서가 발행되면 이메일로 자동 발송됩니다</div>
                </div>
                <div class="form-group">
                    <label class="form-label">자동발행 설정</label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox">
                        <span>매월 자동발행</span>
                    </label>
                    <div class="form-help">체크 시 매월 설정일에 전월 내역이 자동으로 발행됩니다</div>
                </div>
                <button class="btn btn-primary">계산서 정보 수정하기</button>
            </div>

            <!-- 세금계산서 신청 -->
            <div class="card" style="margin-top: 24px;">
                <h3 class="card-title">세금계산서 신청</h3>
                <div class="form-group">
                    <label class="form-label required">발행 대상 기간</label>
                    <div class="flex gap-2">
                        <select class="form-select">
                            <option>2024년 11월</option>
                            <option>2024년 10월</option>
                            <option>2024년 9월</option>
                        </select>
                        <span style="line-height: 40px;">또는</span>
                        <div class="date-range-group">
                            <div class="date-input-wrapper">
                                <input type="date" class="form-input" placeholder="시작일">
                            </div>
                            <span class="date-range-separator">~</span>
                            <div class="date-input-wrapper">
                                <input type="date" class="form-input" placeholder="종료일">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label required">발행 유형</label>
                    <div class="flex gap-2">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="radio" name="issueType" value="charge" checked>
                            <span>충전 내역</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="radio" name="issueType" value="use">
                            <span>사용 내역</span>
                        </label>
                    </div>
                </div>
                <div class="card" style="background: var(--bg-color); margin-top: 16px;">
                    <h4 style="margin-bottom: 12px;">신청 금액</h4>
                    <div class="table-container">
                        <table class="table">
                            <tr>
                                <th style="width: 150px;">공급가액</th>
                                <td>909,091원</td>
                            </tr>
                            <tr>
                                <th>부가세</th>
                                <td>90,909원</td>
                            </tr>
                            <tr>
                                <th>합계금액</th>
                                <td><strong>1,000,000원</strong></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="form-group" style="margin-top: 16px;">
                    <label class="form-label">발행 사유</label>
                    <textarea class="form-textarea" rows="3" placeholder="발행 사유 입력 (선택사항)" maxlength="200"></textarea>
                </div>
                <button class="btn btn-primary" onclick="openModal('confirmModal')">신청하기</button>
            </div>

            <!-- 세금계산서 조회 -->
            <div class="card" style="margin-top: 24px;">
                <h3 class="card-title">세금계산서 조회</h3>
                <div class="search-filter-section">
                    <div class="date-range-group">
                        <div class="date-input-wrapper">
                            <input type="date" class="form-input" id="searchStartDate">
                        </div>
                        <span class="date-range-separator">~</span>
                        <div class="date-input-wrapper">
                            <input type="date" class="form-input" id="searchEndDate">
                        </div>
                    </div>
                    <div style="min-width: 150px;">
                        <select class="form-select">
                            <option>전체 상태</option>
                            <option>발행대기</option>
                            <option>발행완료</option>
                            <option>발행취소</option>
                        </select>
                    </div>
                    <button class="btn btn-primary">조회</button>
                </div>

                <div class="table-container" style="margin-top: 20px;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>번호</th>
                                <th>발행일</th>
                                <th>승인번호</th>
                                <th>공급가액</th>
                                <th>부가세</th>
                                <th>합계금액</th>
                                <th>발행상태</th>
                                <th>신고상태</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>2024-11-15</td>
                                <td>1234567890123</td>
                                <td>909,091원</td>
                                <td>90,909원</td>
                                <td>1,000,000원</td>
                                <td><span class="status-badge status-completed">발행완료</span></td>
                                <td>신고완료</td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-sm btn-outline" onclick="viewDetail(1)">상세보기</button>
                                        <button class="btn btn-sm btn-outline" onclick="downloadPDF(1)">출력</button>
                                        <button class="btn btn-sm btn-outline" onclick="resendEmail(1)">이메일 재전송</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>2024-11-20</td>
                                <td>-</td>
                                <td>454,545원</td>
                                <td>45,455원</td>
                                <td>500,000원</td>
                                <td><span class="status-badge status-pending">발행대기</span></td>
                                <td>-</td>
                                <td>
                                    <button class="btn btn-sm btn-outline" onclick="viewDetail(2)">상세보기</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 페이지네이션 -->
                <div id="pagination" style="margin-top: 24px;"></div>
            </div>
        </main>
    </div>

    <!-- 신청 확인 모달 -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">세금계산서 신청 확인</h3>
                <button class="modal-close" onclick="closeModal('confirmModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="card">
                    <h4 style="margin-bottom: 12px;">신청 정보</h4>
                    <div class="table-container">
                        <table class="table">
                            <tr>
                                <th style="width: 150px;">사업자등록번호</th>
                                <td>123-45-67890</td>
                            </tr>
                            <tr>
                                <th>회사명(상호)</th>
                                <td>주식회사 예시</td>
                            </tr>
                            <tr>
                                <th>발행 기간</th>
                                <td>2024년 11월</td>
                            </tr>
                            <tr>
                                <th>공급가액</th>
                                <td>909,091원</td>
                            </tr>
                            <tr>
                                <th>부가세</th>
                                <td>90,909원</td>
                            </tr>
                            <tr>
                                <th>합계금액</th>
                                <td><strong>1,000,000원</strong></td>
                            </tr>
                            <tr>
                                <th>수신 이메일</th>
                                <td>example@company.com</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="alert alert-info" style="margin-top: 16px;">
                    신청 후 1~2일 내에 이메일로 발송됩니다.<br>
                    발행 완료 시 알림톡이 발송됩니다.
                </div>
                <div class="form-group" style="margin-top: 16px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="infoConfirm" required>
                        <span>위 정보가 정확함을 확인합니다</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('confirmModal')">취소</button>
                <button class="btn btn-primary" onclick="confirmRequest()">신청하기</button>
            </div>
        </div>
    </div>

    <!-- 상세보기 모달 -->
    <div class="modal-overlay" id="detailModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">세금계산서 상세보기</h3>
                <button class="modal-close" onclick="closeModal('detailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="card">
                    <h4 style="margin-bottom: 12px;">세금계산서 정보</h4>
                    <div class="table-container">
                        <table class="table">
                            <tr>
                                <th style="width: 150px;">승인번호</th>
                                <td>1234567890123</td>
                            </tr>
                            <tr>
                                <th>발행일</th>
                                <td>2024-11-15</td>
                            </tr>
                            <tr>
                                <th>공급가액</th>
                                <td>909,091원</td>
                            </tr>
                            <tr>
                                <th>부가세</th>
                                <td>90,909원</td>
                            </tr>
                            <tr>
                                <th>합계금액</th>
                                <td>1,000,000원</td>
                            </tr>
                            <tr>
                                <th>발행상태</th>
                                <td><span class="status-badge status-completed">발행완료</span></td>
                            </tr>
                            <tr>
                                <th>신고상태</th>
                                <td>신고완료</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('detailModal')">닫기</button>
                <button class="btn btn-outline" onclick="downloadPDF(1)">PDF 다운로드</button>
                <button class="btn btn-outline" onclick="printTax()">인쇄하기</button>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script>
        function confirmRequest() {
            if (!document.getElementById('infoConfirm').checked) {
                showToast('정보 확인에 동의해주세요.', 'warning');
                return;
            }
            
            showToast('세금계산서 신청이 완료되었습니다. 1~2일 내에 이메일로 발송됩니다.', 'success');
            closeModal('confirmModal');
        }

        function viewDetail(id) {
            openModal('detailModal');
        }

        function downloadPDF(id) {
            showToast('PDF 다운로드가 시작됩니다.', 'info');
        }

        function resendEmail(id) {
            showToast('이메일이 재전송되었습니다.', 'success');
        }

        function printTax() {
            window.print();
        }

        // 초기화
        const today = new Date();
        const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
        const lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);
        
        document.getElementById('searchStartDate').value = firstDay.toISOString().split('T')[0];
        document.getElementById('searchEndDate').value = lastDay.toISOString().split('T')[0];

        // 페이지네이션 생성
        createPagination(1, 5, 'pagination');
    </script>
</body>
</html>

