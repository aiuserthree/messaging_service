<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>예약내역 - 메시징 서비스</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/layout.css">
    <style>
        .status-badge {
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 500;
        }
        .status-waiting { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        .status-sending { background: rgba(16, 185, 129, 0.1); color: var(--success-color); }
        .status-completed { background: rgba(100, 116, 139, 0.1); color: var(--secondary-color); }
        .status-cancelled { background: rgba(239, 68, 68, 0.1); color: var(--danger-color); }
        .status-failed { background: rgba(245, 158, 11, 0.1); color: var(--warning-color); }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- 헤더 -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html" style="text-decoration: none; color: inherit;">
                        <h1>iSend</h1>
                    </a>
                </div>
                <nav class="main-nav">
                    <a href="index.html" class="nav-item">대시보드</a>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">문자 발송</a>
                        <div class="nav-dropdown">
                            <a href="message-send-general.html" class="nav-dropdown-item">일반문자 발송</a>
                            <a href="message-send-ad.html" class="nav-dropdown-item">광고문자 발송</a>
                            <a href="message-send-election.html" class="nav-dropdown-item">공직선거문자 발송</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">카톡 발송</a>
                        <div class="nav-dropdown">
                            <a href="kakao-send-alimtalk.html" class="nav-dropdown-item">알림톡 발송</a>
                            <a href="kakao-send-brandtalk.html" class="nav-dropdown-item">브랜드톡 발송</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">템플릿</a>
                        <div class="nav-dropdown">
                            <a href="template-message.html" class="nav-dropdown-item">문자</a>
                            <a href="template-alimtalk.html" class="nav-dropdown-item">알림톡</a>
                            <a href="template-brandtalk.html" class="nav-dropdown-item">브랜드톡</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">주소록</a>
                        <div class="nav-dropdown">
                            <a href="addressbook.html" class="nav-dropdown-item">주소록 관리</a>
                            <a href="addressbook-reject.html" class="nav-dropdown-item">수신거부관리</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown active">
                        <a href="#" class="nav-link">발송 관리</a>
                        <div class="nav-dropdown">
                            <a href="send-result.html" class="nav-dropdown-item">발송결과</a>
                            <a href="send-reservation.html" class="nav-dropdown-item active">예약내역</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">결제 관리</a>
                        <div class="nav-dropdown">
                            <a href="payment-charge.html" class="nav-dropdown-item">충전하기</a>
                            <a href="payment-history.html" class="nav-dropdown-item">충전/사용 내역</a>
                            <a href="payment-tax.html" class="nav-dropdown-item">세금계산서 발행</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">마이페이지</a>
                        <div class="nav-dropdown">
                            <a href="mypage-profile.html" class="nav-dropdown-item">내 정보 수정</a>
                            <a href="mypage-caller-number.html" class="nav-dropdown-item">발신번호 관리</a>
                        </div>
                    </div>
                </nav>
                <div class="header-actions">
                    <div class="balance-info">
                        <span class="balance-label">잔액</span>
                        <span class="balance-amount">1,000,000원</span>
                    </div>
                    <button class="btn btn-sm btn-outline">로그아웃</button>
                </div>
            </div>
        </header>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <div class="page-header">
                <h2>예약내역</h2>
                <p class="page-description">예약한 메시지 발송 내역을 조회하고 관리합니다</p>
            </div>

            <!-- 안내 메시지 -->
            <div class="alert alert-info">
                <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                    <li>최근 90일동안 보낸 메시지를 확인하실 수 있습니다</li>
                    <li>예약 메시지는 '예약시간 10분 전까지' 수정 및 취소하실 수 있습니다</li>
                </ul>
            </div>

            <!-- 조회 조건 -->
            <div class="card">
                <div class="search-filter-section">
                    <div style="min-width: 150px;">
                        <select class="form-select">
                            <option>2024년 11월</option>
                            <option>2024년 10월</option>
                            <option>2024년 9월</option>
                        </select>
                    </div>
                    <div class="date-range-group">
                        <div class="date-input-wrapper">
                            <input type="date" class="form-input" value="2024-11-01">
                        </div>
                        <span class="date-range-separator">~</span>
                        <div class="date-input-wrapper">
                            <input type="date" class="form-input" value="2024-11-30">
                        </div>
                    </div>
                    <div style="min-width: 150px;">
                        <select class="form-select">
                            <option>전체 타입</option>
                            <option>SMS</option>
                            <option>LMS</option>
                            <option>MMS</option>
                            <option>알림톡</option>
                            <option>브랜드톡</option>
                        </select>
                    </div>
                    <div style="flex: 1; min-width: 200px;">
                        <input type="text" class="form-input" placeholder="제목 또는 내용으로 검색">
                    </div>
                    <button class="btn btn-primary">조회</button>
                </div>
            </div>

            <!-- 예약내역 목록 -->
            <div class="card">
                <div class="template-actions">
                    <div>
                        <button class="btn btn-outline btn-sm" onclick="cancelSelected()">선택 취소</button>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn btn-outline btn-sm">엑셀 다운로드</button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th style="width: 50px;"><input type="checkbox"></th>
                                <th>등록일</th>
                                <th>발송 예정일</th>
                                <th>제목/내용</th>
                                <th>메시지 타입</th>
                                <th>예약 건수</th>
                                <th>예약 성공</th>
                                <th>상태</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>2024-11-19 14:30</td>
                                <td>2024-11-20 09:00</td>
                                <td style="cursor: pointer;" onclick="viewDetail(1)">이벤트 안내 메시지입니다...</td>
                                <td><span class="badge badge-primary">SMS</span></td>
                                <td>1,000건</td>
                                <td>995건</td>
                                <td><span class="status-badge status-waiting">예약대기</span></td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-sm btn-outline" onclick="viewDetail(1)">상세보기</button>
                                        <button class="btn btn-sm btn-outline" onclick="editReservation(1)">수정</button>
                                        <button class="btn btn-sm btn-outline" onclick="cancelReservation(1)">취소</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>2024-11-18 10:20</td>
                                <td>2024-11-19 15:00</td>
                                <td style="cursor: pointer;" onclick="viewDetail(2)">신제품 출시 안내</td>
                                <td><span class="badge badge-primary">LMS</span></td>
                                <td>500건</td>
                                <td>500건</td>
                                <td><span class="status-badge status-sending">발송중</span></td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-sm btn-outline" onclick="viewDetail(2)">상세보기</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>2024-11-17 16:45</td>
                                <td>2024-11-18 10:00</td>
                                <td style="cursor: pointer;" onclick="viewDetail(3)">배송 안내 메시지</td>
                                <td><span class="badge badge-primary">알림톡</span></td>
                                <td>2,000건</td>
                                <td>1,980건</td>
                                <td><span class="status-badge status-completed">발송완료</span></td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-sm btn-outline" onclick="viewDetail(3)">상세보기</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 페이지네이션 -->
                <div id="pagination" style="margin-top: 24px;"></div>
            </div>
        </main>
    </div>

    <!-- 상세보기 모달 -->
    <div class="modal-overlay" id="detailModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">예약 상세보기</h3>
                <button class="modal-close" onclick="closeModal('detailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="card">
                    <h4 style="margin-bottom: 12px;">기본 정보</h4>
                    <div class="table-container">
                        <table class="table">
                            <tr>
                                <th style="width: 150px;">등록일시</th>
                                <td>2024-11-19 14:30:00</td>
                            </tr>
                            <tr>
                                <th>발송 예정일시</th>
                                <td>2024-11-20 09:00:00</td>
                            </tr>
                            <tr>
                                <th>남은 시간</th>
                                <td><strong>14시간 30분 후 발송 예정</strong></td>
                            </tr>
                            <tr>
                                <th>상태</th>
                                <td><span class="status-badge status-waiting">예약대기</span></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="card" style="margin-top: 16px;">
                    <h4 style="margin-bottom: 12px;">발송 정보</h4>
                    <div class="table-container">
                        <table class="table">
                            <tr>
                                <th style="width: 150px;">발신번호</th>
                                <td>010-1234-5678</td>
                            </tr>
                            <tr>
                                <th>메시지 타입</th>
                                <td>SMS</td>
                            </tr>
                            <tr>
                                <th>예약 건수</th>
                                <td>1,000건</td>
                            </tr>
                            <tr>
                                <th>예약 성공</th>
                                <td>995건</td>
                            </tr>
                            <tr>
                                <th>메시지 내용</th>
                                <td>이벤트 안내 메시지입니다. 자세한 내용은 홈페이지를 확인해주세요.</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('detailModal')">닫기</button>
                <button class="btn btn-outline" onclick="editReservation(1)">수정하기</button>
                <button class="btn btn-outline" onclick="cancelReservation(1)">취소하기</button>
                <button class="btn btn-primary" onclick="copyAndSend()">복사하여 새로 보내기</button>
            </div>
        </div>
    </div>

    <!-- 취소 확인 모달 -->
    <div class="modal-overlay" id="cancelModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">예약 취소</h3>
                <button class="modal-close" onclick="closeModal('cancelModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>정말 취소하시겠습니까?</p>
                <div class="alert alert-info" style="margin-top: 16px;">
                    취소 시 포인트가 환불됩니다.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('cancelModal')">취소</button>
                <button class="btn btn-danger" onclick="confirmCancel()">예약 취소</button>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script>
        function viewDetail(id) {
            openModal('detailModal');
        }

        function editReservation(id) {
            showToast('예약 수정 페이지로 이동합니다.', 'info');
            // 예약 수정 페이지로 이동
        }

        function cancelReservation(id) {
            openModal('cancelModal');
        }

        function confirmCancel() {
            showToast('예약이 취소되었습니다.', 'success');
            closeModal('cancelModal');
        }

        function cancelSelected() {
            openModal('cancelModal');
        }

        function copyAndSend() {
            showToast('발송 페이지로 이동합니다.', 'info');
            window.location.href = 'message-send-general.html';
        }

        // 페이지네이션 생성
        createPagination(1, 5, 'pagination');
    </script>
</body>
</html>

