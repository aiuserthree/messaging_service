<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•Œë¦¼í†¡ í…œí”Œë¦¿ ë“±ë¡ - ë©”ì‹œì§• ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/layout.css">
    <style>
        .register-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 24px;
        }
        .guide-section {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 24px;
        }
        .guide-section h4 {
            margin-bottom: 12px;
            font-size: 16px;
        }
        .guide-section ul {
            padding-left: 20px;
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.8;
        }
        .button-config {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-bottom: 12px;
        }
        .button-config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .preview-section {
            position: sticky;
            top: 80px;
            height: fit-content;
        }
        .preview-kakao {
            background: #FEE500;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .preview-kakao-header {
            background: white;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .preview-kakao-profile {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
        }
        .preview-kakao-body {
            background: white;
            border-radius: 12px;
            padding: 16px;
            min-height: 200px;
        }
        .button-preview {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        .button-preview-item {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border-radius: var(--radius-md);
            font-size: 12px;
        }
        @media (max-width: 1024px) {
            .register-layout {
                grid-template-columns: 1fr;
            }
            .preview-section {
                position: static;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- í—¤ë” -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html" style="text-decoration: none; color: inherit;">
                        <h1>iSend</h1>
                    </a>
                </div>
                <nav class="main-nav">
                    <a href="index.html" class="nav-item">ëŒ€ì‹œë³´ë“œ</a>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">ë¬¸ì ë°œì†¡</a>
                        <div class="nav-dropdown">
                            <a href="message-send-general.html" class="nav-dropdown-item">ì¼ë°˜ë¬¸ì ë°œì†¡</a>
                            <a href="message-send-ad.html" class="nav-dropdown-item">ê´‘ê³ ë¬¸ì ë°œì†¡</a>
                            <a href="message-send-election.html" class="nav-dropdown-item">ê³µì§ì„ ê±°ë¬¸ì ë°œì†¡</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">ì¹´í†¡ ë°œì†¡</a>
                        <div class="nav-dropdown">
                            <a href="kakao-send-alimtalk.html" class="nav-dropdown-item">ì•Œë¦¼í†¡ ë°œì†¡</a>
                            <a href="kakao-send-brandtalk.html" class="nav-dropdown-item">ë¸Œëœë“œí†¡ ë°œì†¡</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown active">
                        <a href="#" class="nav-link">í…œí”Œë¦¿</a>
                        <div class="nav-dropdown">
                            <a href="template-message.html" class="nav-dropdown-item">ë¬¸ì</a>
                            <a href="template-alimtalk.html" class="nav-dropdown-item active">ì•Œë¦¼í†¡</a>
                            <a href="template-brandtalk.html" class="nav-dropdown-item">ë¸Œëœë“œí†¡</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">ì£¼ì†Œë¡</a>
                        <div class="nav-dropdown">
                            <a href="addressbook.html" class="nav-dropdown-item">ì£¼ì†Œë¡ ê´€ë¦¬</a>
                            <a href="addressbook-reject.html" class="nav-dropdown-item">ìˆ˜ì‹ ê±°ë¶€ê´€ë¦¬</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">ë°œì†¡ ê´€ë¦¬</a>
                        <div class="nav-dropdown">
                            <a href="send-result.html" class="nav-dropdown-item">ë°œì†¡ê²°ê³¼</a>
                            <a href="send-reservation.html" class="nav-dropdown-item">ì˜ˆì•½ë‚´ì—­</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">ê²°ì œ ê´€ë¦¬</a>
                        <div class="nav-dropdown">
                            <a href="payment-charge.html" class="nav-dropdown-item">ì¶©ì „í•˜ê¸°</a>
                            <a href="payment-history.html" class="nav-dropdown-item">ì¶©ì „/ì‚¬ìš© ë‚´ì—­</a>
                            <a href="payment-tax.html" class="nav-dropdown-item">ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰</a>
                        </div>
                    </div>
                    <div class="nav-item has-dropdown">
                        <a href="#" class="nav-link">ë§ˆì´í˜ì´ì§€</a>
                        <div class="nav-dropdown">
                            <a href="mypage-profile.html" class="nav-dropdown-item">ë‚´ ì •ë³´ ìˆ˜ì •</a>
                            <a href="mypage-caller-number.html" class="nav-dropdown-item">ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬</a>
                        </div>
                    </div>
                </nav>
                <div class="header-actions">
                    <div class="balance-info">
                        <span class="balance-label">ì”ì•¡</span>
                        <span class="balance-amount">1,000,000ì›</span>
                    </div>
                    <button class="btn btn-sm btn-outline">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </header>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <div class="page-header">
                <h2>ì•Œë¦¼í†¡ í…œí”Œë¦¿ ë“±ë¡</h2>
                <p class="page-description">ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡ì„ ìœ„í•œ í…œí”Œë¦¿ì„ ë“±ë¡í•©ë‹ˆë‹¤</p>
            </div>

            <!-- ì‘ì„± ê°€ì´ë“œ -->
            <div class="guide-section">
                <h4>ğŸ“‹ í…œí”Œë¦¿ ì‘ì„± ê°€ì´ë“œ</h4>
                <ul>
                    <li>ì•Œë¦¼í†¡ì€ ì •ë³´ì„± ë©”ì‹œì§€ë§Œ ë°œì†¡ ê°€ëŠ¥í•©ë‹ˆë‹¤ (ê´‘ê³ ì„± ë©”ì‹œì§€ ë¶ˆê°€)</li>
                    <li>ìˆ˜ì‹ ìê°€ ìš”ì²­í•˜ê±°ë‚˜ ë™ì˜í•œ ì •ë³´ë§Œ ë°œì†¡ ê°€ëŠ¥í•©ë‹ˆë‹¤</li>
                    <li>ëª…í™•í•œ ë°œì‹  ëª©ì  ë° ë‚´ìš©ì„ ëª…ì‹œí•´ì£¼ì„¸ìš”</li>
                    <li>í…œí”Œë¦¿ ê²€ìˆ˜ ì†Œìš” ì‹œê°„: í‰ê·  2~3ì‹œê°„ (ì˜ì—…ì¼ ê¸°ì¤€)</li>
                    <li>ë³€ìˆ˜ í˜•ì‹: #{ë³€ìˆ˜ëª…} (ì˜ˆ: #{ì£¼ë¬¸ë²ˆí˜¸}, #{ê³ ê°ëª…})</li>
                </ul>
            </div>

            <div class="register-layout">
                <!-- ì…ë ¥ ì˜ì—­ -->
                <div class="card">
                    <form id="templateForm">
                        <!-- ì¹´ì¹´ì˜¤ ì±„ë„ ì„ íƒ -->
                        <div class="form-group">
                            <label class="form-label required">ì¹´ì¹´ì˜¤ ì±„ë„</label>
                            <select class="form-select" required>
                                <option>ë§ˆì¼€íŒ…íŒ€ (ì±„ë„ ID: @marketing)</option>
                                <option>ê³ ê°ì„¼í„° (ì±„ë„ ID: @support)</option>
                            </select>
                        </div>

                        <!-- í…œí”Œë¦¿ ê¸°ë³¸ ì •ë³´ -->
                        <div class="form-group">
                            <label class="form-label required">í…œí”Œë¦¿ ì½”ë“œ</label>
                            <div class="flex gap-2">
                                <input type="text" class="form-input" placeholder="WELCOME_001" maxlength="30" required>
                                <button type="button" class="btn btn-outline" onclick="checkCode()">ì¤‘ë³µ í™•ì¸</button>
                            </div>
                            <div class="form-help">ì˜ë¬¸, ìˆ«ì, ì–¸ë”ìŠ¤ì½”ì–´(_) ì¡°í•©, ìµœëŒ€ 30ì</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label required">í…œí”Œë¦¿ëª…</label>
                            <input type="text" class="form-input" placeholder="í…œí”Œë¦¿ ê´€ë¦¬ìš© ì´ë¦„" maxlength="200" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label required">ì¹´í…Œê³ ë¦¬</label>
                            <div class="flex gap-2">
                                <select class="form-select" required>
                                    <option>ì‡¼í•‘/ë°°ì†¡</option>
                                    <option>ì˜ˆì•½/í‹°ì¼“</option>
                                    <option>ê¸ˆìœµ/ë³´í—˜</option>
                                    <option>ìƒí™œ/ë ˆì €</option>
                                    <option>êµìœ¡</option>
                                    <option>ê¸°íƒ€</option>
                                </select>
                                <select class="form-select" required>
                                    <option>ì£¼ë¬¸/ê²°ì œ</option>
                                    <option>ë°°ì†¡</option>
                                    <option>ë°˜í’ˆ/êµí™˜</option>
                                    <option>ìƒí’ˆ ë¬¸ì˜</option>
                                </select>
                            </div>
                        </div>

                        <!-- ë©”ì‹œì§€ ìœ í˜• -->
                        <div class="form-group">
                            <label class="form-label required">ë©”ì‹œì§€ ìœ í˜•</label>
                            <div class="flex gap-2">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="messageType" value="basic" checked>
                                    <span>ê¸°ë³¸í˜•</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="messageType" value="emphasis">
                                    <span>ê°•ì¡°í˜•</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="messageType" value="image">
                                    <span>ì´ë¯¸ì§€í˜•</span>
                                </label>
                            </div>
                        </div>

                        <!-- ë©”ì‹œì§€ ë‚´ìš© -->
                        <div class="form-group">
                            <label class="form-label required">ë©”ì‹œì§€ ë‚´ìš©</label>
                            <div class="flex gap-2 mb-1">
                                <button type="button" class="btn btn-sm btn-outline" onclick="insertVariable('#{ê³ ê°ëª…}')">#{ê³ ê°ëª…}</button>
                                <button type="button" class="btn btn-sm btn-outline" onclick="insertVariable('#{ì£¼ë¬¸ë²ˆí˜¸}')">#{ì£¼ë¬¸ë²ˆí˜¸}</button>
                                <button type="button" class="btn btn-sm btn-outline" onclick="insertVariable('#{ë°°ì†¡ì¼ì}')">#{ë°°ì†¡ì¼ì}</button>
                                <button type="button" class="btn btn-sm btn-outline" onclick="insertVariable('#{ê¸ˆì•¡}')">#{ê¸ˆì•¡}</button>
                            </div>
                            <textarea class="form-textarea" id="messageContent" rows="8" placeholder="ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 1,000ì)" maxlength="1000" required oninput="updateCharCounter()"></textarea>
                            <div class="byte-counter" id="charCounter">0 / 1,000ì</div>
                        </div>

                        <!-- ì´ë¯¸ì§€ ì²¨ë¶€ (ì´ë¯¸ì§€í˜•) -->
                        <div class="form-group" id="imageGroup" style="display: none;">
                            <label class="form-label required">ì´ë¯¸ì§€</label>
                            <input type="file" class="form-input" accept="image/jpeg,image/png" onchange="handleImageUpload(event)">
                            <div class="form-help">JPG, PNG (ìµœëŒ€ 500KB, ê¶Œì¥: 800px Ã— 600px)</div>
                            <div id="imagePreview" style="margin-top: 12px;"></div>
                        </div>

                        <!-- ë³´ì¡°ë¬¸êµ¬ -->
                        <div class="form-group">
                            <label class="form-label">ë³´ì¡°ë¬¸êµ¬</label>
                            <textarea class="form-textarea" rows="3" placeholder="ë¶€ê°€ ì•ˆë‚´ ì •ë³´ ì…ë ¥ (ì„ íƒì‚¬í•­, ìµœëŒ€ 500ì)" maxlength="500"></textarea>
                        </div>

                        <!-- ë²„íŠ¼ ì„¤ì • -->
                        <div class="form-group">
                            <label class="form-label">ë²„íŠ¼ (ìµœëŒ€ 5ê°œ)</label>
                            <div id="buttonList"></div>
                            <button type="button" class="btn btn-sm btn-outline mt-1" onclick="addButton()">ë²„íŠ¼ ì¶”ê°€</button>
                        </div>

                        <!-- ë°”ë¡œì—°ê²° ì„¤ì • -->
                        <div class="form-group">
                            <label class="form-label">ë°”ë¡œì—°ê²° (Quick Reply)</label>
                            <div class="flex gap-2">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="quickReply" value="no" checked>
                                    <span>ë¯¸ì‚¬ìš©</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="quickReply" value="yes">
                                    <span>ì‚¬ìš©</span>
                                </label>
                            </div>
                            <div id="quickReplyConfig" style="display: none; margin-top: 12px;">
                                <select class="form-select" style="margin-bottom: 8px;">
                                    <option>ë©”ì‹œì§€ ì „ë‹¬</option>
                                    <option>ë´‡ í‚¤ì›Œë“œ</option>
                                </select>
                                <input type="text" class="form-input" placeholder="ë©”ì‹œì§€ ë‚´ìš© ë˜ëŠ” í‚¤ì›Œë“œ ì…ë ¥ (ìµœëŒ€ 100ì)" maxlength="100">
                            </div>
                        </div>

                        <!-- í…œí”Œë¦¿ ë³´ì•ˆ ì„¤ì • -->
                        <div class="form-group">
                            <label class="form-label">í…œí”Œë¦¿ ë³´ì•ˆ</label>
                            <div class="flex gap-2">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="security" value="no" checked>
                                    <span>ë¯¸ì‚¬ìš©</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="radio" name="security" value="yes">
                                    <span>ì‚¬ìš©</span>
                                </label>
                            </div>
                            <div class="form-help">ë¯¼ê°í•œ ì •ë³´ í¬í•¨ ì‹œ ì‚¬ìš© (OTP, ë¹„ë°€ë²ˆí˜¸, ê¸ˆìœµì •ë³´ ë“±)</div>
                        </div>
                    </form>
                </div>

                <!-- ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ -->
                <div class="preview-section">
                    <div class="card">
                        <h3 class="card-title">í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸°</h3>
                        <div class="preview-kakao">
                            <div class="preview-kakao-header">
                                <div class="preview-kakao-profile"></div>
                                <div>
                                    <div style="font-weight: 600;" id="previewChannelName">ë§ˆì¼€íŒ…íŒ€</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">ì˜¤ëŠ˜ ì˜¤í›„ 2:30</div>
                                </div>
                            </div>
                            <div class="preview-kakao-body">
                                <div id="previewContent" style="white-space: pre-wrap; line-height: 1.6;">ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”</div>
                                <div class="button-preview" id="previewButtons"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ -->
            <div class="card" style="margin-top: 24px;">
                <div class="flex gap-2">
                    <button class="btn btn-outline" onclick="saveDraft()">ì„ì‹œ ì €ì¥</button>
                    <button class="btn btn-outline" onclick="cancel()">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" style="margin-left: auto;" onclick="submitReview()">ê²€ìˆ˜ ì‹ ì²­</button>
                </div>
            </div>
        </main>
    </div>

    <!-- ê²€ìˆ˜ ì‹ ì²­ í™•ì¸ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="reviewConfirmModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">ê²€ìˆ˜ ì‹ ì²­ í™•ì¸</h3>
                <button class="modal-close" onclick="closeModal('reviewConfirmModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    <strong>ê²€ìˆ˜ ì†Œìš” ì‹œê°„ ì•ˆë‚´</strong>
                    <p style="margin-top: 8px; font-size: 12px;">
                        í…œí”Œë¦¿ ê²€ìˆ˜ëŠ” í‰ê·  2~3ì‹œê°„ ì†Œìš”ë©ë‹ˆë‹¤ (ì˜ì—…ì¼ ê¸°ì¤€).<br>
                        ì˜ì—…ì‹œê°„ ì™¸ ì‹ ì²­ ì‹œ ìµì¼ ì²˜ë¦¬ë©ë‹ˆë‹¤.
                    </p>
                </div>
                <div class="card">
                    <h4 style="margin-bottom: 12px;">í…œí”Œë¦¿ ì •ë³´</h4>
                    <div class="table-container">
                        <table class="table">
                            <tr>
                                <th style="width: 150px;">ì±„ë„ëª…</th>
                                <td id="confirmChannel">-</td>
                            </tr>
                            <tr>
                                <th>í…œí”Œë¦¿ ì½”ë“œ</th>
                                <td id="confirmCode">-</td>
                            </tr>
                            <tr>
                                <th>í…œí”Œë¦¿ëª…</th>
                                <td id="confirmName">-</td>
                            </tr>
                            <tr>
                                <th>ì¹´í…Œê³ ë¦¬</th>
                                <td id="confirmCategory">-</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="alert alert-warning" style="margin-top: 16px;">
                    ê²€ìˆ˜ ì‹ ì²­ ì‹œ ìˆ˜ì •ì´ ë¶ˆê°€í•©ë‹ˆë‹¤. ë‚´ìš©ì„ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•´ì£¼ì„¸ìš”.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('reviewConfirmModal')">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="confirmReview()">ê²€ìˆ˜ ì‹ ì²­</button>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script>
        let buttonCount = 0;

        // ë©”ì‹œì§€ ìœ í˜• ë³€ê²½
        document.querySelectorAll('input[name="messageType"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const imageGroup = document.getElementById('imageGroup');
                if (this.value === 'image') {
                    imageGroup.style.display = 'block';
                } else {
                    imageGroup.style.display = 'none';
                }
            });
        });

        // ë°”ë¡œì—°ê²° ì„¤ì •
        document.querySelectorAll('input[name="quickReply"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const config = document.getElementById('quickReplyConfig');
                config.style.display = this.value === 'yes' ? 'block' : 'none';
            });
        });

        // ë©”ì‹œì§€ ë‚´ìš© ì…ë ¥ ì‹œ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        document.getElementById('messageContent').addEventListener('input', function() {
            updatePreview();
            updateCharCounter();
        });

        function updateCharCounter() {
            const content = document.getElementById('messageContent').value;
            const counter = document.getElementById('charCounter');
            counter.textContent = `${content.length} / 1,000ì`;
            
            if (content.length > 900) {
                counter.classList.add('warning');
            } else {
                counter.classList.remove('warning');
            }
        }

        function insertVariable(variable) {
            const textarea = document.getElementById('messageContent');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const text = textarea.value;
            textarea.value = text.substring(0, start) + variable + text.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + variable.length, start + variable.length);
            updatePreview();
            updateCharCounter();
        }

        function updatePreview() {
            const content = document.getElementById('messageContent').value;
            // ë³€ìˆ˜ ì¹˜í™˜ ì˜ˆì‹œ
            let previewText = content
                .replace(/#{ê³ ê°ëª…}/g, 'í™ê¸¸ë™')
                .replace(/#{ì£¼ë¬¸ë²ˆí˜¸}/g, 'ORD123456')
                .replace(/#{ë°°ì†¡ì¼ì}/g, '2024-01-20')
                .replace(/#{ê¸ˆì•¡}/g, '50,000ì›');
            
            document.getElementById('previewContent').textContent = previewText || 'ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”';
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('imagePreview');
                preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; max-height: 200px; border-radius: var(--radius-md);">`;
            };
            reader.readAsDataURL(file);
        }

        function addButton() {
            if (buttonCount >= 5) {
                showToast('ë²„íŠ¼ì€ ìµœëŒ€ 5ê°œê¹Œì§€ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'warning');
                return;
            }
            
            const buttonList = document.getElementById('buttonList');
            const div = document.createElement('div');
            div.className = 'button-config';
            div.innerHTML = `
                <div class="button-config-header">
                    <strong>ë²„íŠ¼ ${buttonCount + 1}</strong>
                    <button type="button" class="btn btn-sm" onclick="removeButton(this)">ì‚­ì œ</button>
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">ë²„íŠ¼ íƒ€ì…</label>
                    <select class="form-select" onchange="updateButtonPreview(this)">
                        <option value="web">ì›¹ ë§í¬</option>
                        <option value="app">ì•± ë§í¬</option>
                        <option value="channel">ì±„ë„ ì¶”ê°€</option>
                        <option value="message">ë©”ì‹œì§€ ì „ë‹¬</option>
                        <option value="bot">ë´‡ í‚¤ì›Œë“œ</option>
                    </select>
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">ë²„íŠ¼ëª…</label>
                    <input type="text" class="form-input" placeholder="ë²„íŠ¼ëª… ì…ë ¥ (ìµœëŒ€ 14ì)" maxlength="14" oninput="updateButtonPreview(this)">
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">ë§í¬/ì•¡ì…˜</label>
                    <input type="text" class="form-input" placeholder="URL ë˜ëŠ” ì•¡ì…˜ ì…ë ¥">
                </div>
            `;
            buttonList.appendChild(div);
            buttonCount++;
            updateButtonPreview();
        }

        function removeButton(btn) {
            btn.closest('.button-config').remove();
            buttonCount--;
            updateButtonPreview();
        }

        function updateButtonPreview() {
            const buttons = Array.from(document.querySelectorAll('.button-config')).map(config => {
                const name = config.querySelector('input[placeholder*="ë²„íŠ¼ëª…"]')?.value || '';
                return name;
            }).filter(name => name);
            
            const preview = document.getElementById('previewButtons');
            preview.innerHTML = buttons.map(name => 
                `<div class="button-preview-item">${name}</div>`
            ).join('');
        }

        function checkCode() {
            showToast('ì‚¬ìš© ê°€ëŠ¥í•œ í…œí”Œë¦¿ ì½”ë“œì…ë‹ˆë‹¤.', 'success');
        }

        function saveDraft() {
            showToast('ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        function cancel() {
            if (confirm('ì‘ì„± ì¤‘ì¸ ë‚´ìš©ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.href = 'template-alimtalk.html';
            }
        }

        function submitReview() {
            // ìµœì¢… í™•ì¸ ì •ë³´ ì„¤ì •
            document.getElementById('confirmChannel').textContent = document.querySelector('.form-select').value;
            // ì‹¤ì œë¡œëŠ” í¼ì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨
            openModal('reviewConfirmModal');
        }

        function confirmReview() {
            showToast('ê²€ìˆ˜ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê²€ìˆ˜ ê²°ê³¼ëŠ” 2~3ì‹œê°„ ë‚´ì— ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.', 'success');
            closeModal('reviewConfirmModal');
            setTimeout(() => {
                window.location.href = 'template-alimtalk.html';
            }, 2000);
        }
    </script>
</body>
</html>

